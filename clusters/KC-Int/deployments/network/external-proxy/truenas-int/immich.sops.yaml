apiVersion: v1
kind: Service
metadata:
    name: immich
spec:
    type: ExternalName
    selector:
        app: traefik
    ports:
        - name: immich
          port: 30041
          targetPort: 30041
    externalName: ENC[AES256_GCM,data:1BL4i4muAw4hKIE=,iv://BXfoXAdydgyj+f/lRYR/IU6uHwyGJxM0H1Qwo4RbM=,tag:WGv8Yjf4w3+6nPTS0ncB2Q==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWGVlRXdObkpkTGVMQWNr
            NmNiVVdmQ29CNStmQVpFdGlBSklHNHJxTzB3CnVKdGd0dkx1V1VBTmh3U3BXcUQ1
            WjQzYjJLMXpoUTFwcGJQYzBrbnQ1RUkKLS0tIFRsVE5XckVPVk5ZazFiSmE3eGtS
            VWpRbU9aMjJKaWFFa1doYVVzQVd5Zm8KRdOCXqf1iplUXLVniS/qEppZ/Og9o3/6
            Wdh4Gm/CpoGZ+KL0SgdgNBfGbsozy++b1G0FrQnRHdU0B3/Zdlx9tg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-27T13:21:05Z"
    mac: ENC[AES256_GCM,data:L0vmLKrrsr/EDtWuOD8Vu6HzAUqif10xobvtm3zio+nSEZAU7NFqtmawRip9j0ocUzQ2KAv8DGvtHjzD8uI4I8bxvJCqeBbcd8WNxvkX1QyajdLS9J3GeS98RzIOMW2n0qYQkfvce2R1r63ZjHfsnWOdFwMdCjmrNFoBINGt63U=,iv:2hU/UAX0ZrNUOezRBGF0uVxsiOFmr0GoZq3rOYAG4TI=,tag:jPQAiwiQiTNxRpFjoAkVOw==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|data|match|externalName)$
    version: 3.8.1
---
apiVersion: traefik.io/v1alpha1
kind: IngressRoute
metadata:
    name: immich
    annotations:
        kubernetes.io/ingress.class: traefik
spec:
    entryPoints:
        - websecure
    routes:
        - kind: Rule
          match: ENC[AES256_GCM,data:7sFsTZH/WbBzAWw387VzeuZnRyiHcxtarxU=,iv:IxojdI33S5F4JXkmL4cMdg6JPyisp3lPFgMmD4DuMQM=,tag:wBJLqUHTUFiqNLU2/IsiXA==,type:str]
          services:
            - name: immich
              port: 30041
        - kind: Rule
          match: ENC[AES256_GCM,data:+UGmeZXmaO27l09pz73wWSzOC1P1EA==,iv:ZCg5rZq3Nkhwee/17rMWMsAXPBZxA4TpfoY02BU8eZg=,tag:XXxxgZQ1X6flm7Axjp/WNA==,type:str]
          services:
            - name: immich
              port: 30041
    tls:
        secretName: production-tls
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWGVlRXdObkpkTGVMQWNr
            NmNiVVdmQ29CNStmQVpFdGlBSklHNHJxTzB3CnVKdGd0dkx1V1VBTmh3U3BXcUQ1
            WjQzYjJLMXpoUTFwcGJQYzBrbnQ1RUkKLS0tIFRsVE5XckVPVk5ZazFiSmE3eGtS
            VWpRbU9aMjJKaWFFa1doYVVzQVd5Zm8KRdOCXqf1iplUXLVniS/qEppZ/Og9o3/6
            Wdh4Gm/CpoGZ+KL0SgdgNBfGbsozy++b1G0FrQnRHdU0B3/Zdlx9tg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-06-27T13:21:05Z"
    mac: ENC[AES256_GCM,data:L0vmLKrrsr/EDtWuOD8Vu6HzAUqif10xobvtm3zio+nSEZAU7NFqtmawRip9j0ocUzQ2KAv8DGvtHjzD8uI4I8bxvJCqeBbcd8WNxvkX1QyajdLS9J3GeS98RzIOMW2n0qYQkfvce2R1r63ZjHfsnWOdFwMdCjmrNFoBINGt63U=,iv:2hU/UAX0ZrNUOezRBGF0uVxsiOFmr0GoZq3rOYAG4TI=,tag:jPQAiwiQiTNxRpFjoAkVOw==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|data|match|externalName)$
    version: 3.8.1
