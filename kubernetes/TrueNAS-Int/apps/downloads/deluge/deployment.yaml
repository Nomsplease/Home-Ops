apiVersion: apps/v1
kind: Deployment
metadata:
    name: deluge
    namespace: downloads
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: deluge
    template:
        metadata:
            labels:
                app: deluge
        spec:
            containers:
                ## Gluetun Container
                - name: deluge-vpn
                  image: ghcr.io/qdm12/gluetun@sha256:e71f503a769e3e647e8a600a6fb25b6dc11b03a41f5abfa525cf70935970c0bc
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                  resources:
                    limits:
                        memory: 2Gi
                        cpu: "1"
                  env:
                    - name: ENC[AES256_GCM,data:fR8M6w==,iv:8yZTwsVsthsd3x7WpriahRfqVu8hTxUuLAWvqbhzgXU=,tag:uslMYipIwa+Wc0pfh5Sx7Q==,type:str]
                      value: ENC[AES256_GCM,data:rmQa,iv:IuJ6F2MynjQKL8AAv2I1EkyR40LnBA4bOKBP4uuIdOs=,tag:p72gYMODmAAI3lrjdzcIhQ==,type:str]
                    - name: ENC[AES256_GCM,data:w3BPVg==,iv:qEU0z6D6z4dCTvoOB8fl4Mxefauweznw859zZfAF1qc=,tag:uFzH3qZGJhDdp9QqtRvWgg==,type:str]
                      value: ENC[AES256_GCM,data:GN1T,iv:PNEITcGaTT5fsIGAE1gGPj5p6AhJ1FKFu51OwImhwIo=,tag:BVYQMqdnF2974LVrVp4E6w==,type:str]
                    - name: ENC[AES256_GCM,data:5FU=,iv:+ehDKMn46PBQ9Ov+AFJNLkCg6ePjajqP7GaCGCL/WeQ=,tag:Obnbew3sftaEGHs5esQ+mA==,type:str]
                      value: ENC[AES256_GCM,data:6ZNSc0Cz/HJy3ib9Z4ajFQ==,iv:XWFwnD4VEM5NI4LB93EsSkSukrtqSYs1P0HGte9PnBU=,tag:OtaKv4pdd3EnbmlsS5ZrNw==,type:str]
                    - name: ENC[AES256_GCM,data:axS7zeKWzj22OSb6ynS7vUTaGPA=,iv:rkOspAl71LozzPewhWG0+JNmsTTdvGRhREKkuM4+cZM=,tag:A3xbtf9C3osdbtS+2aYU+Q==,type:str]
                      value: ENC[AES256_GCM,data:02o63eWiOA+MCxVMnBssklGmnCBEdIo=,iv:ahRMqxDkd2GWZy3E1aZuacgHS2+9Azj9lNmUlL4/HxY=,tag:tzo65XqDXZO5m7RokjSbTQ==,type:str]
                    - name: ENC[AES256_GCM,data:86fvbMJ/7kulir+CQGM=,iv:aiEZ9s0UmY3L8TUIaUndzP7HxuA0aeQF+nH5LtNASJY=,tag:04BAE5xjj3HS+G4147RK8A==,type:str]
                      value: ENC[AES256_GCM,data:NZAhVOMHEdM6brkuNfLpKw==,iv:XxtDBNg2ihY33/bth4nYg68YDLHvYbP+ssWIb28Laes=,tag:XlqU6c9dML/HcK81E+PeLg==,type:str]
                    - name: ENC[AES256_GCM,data:HsP6nHquw405rXnX,iv:9Fy3zQ+uW/s03sq+JXCPrOWoC9ETolZfb9RYwIziIr8=,tag:mL8wiT/yD+vM7Kem1i2Qow==,type:str]
                      value: ENC[AES256_GCM,data:SYBUYJjtkMw=,iv:00XGDud2DdwZ3Lw1SsYyv07M2kvI8SEF3eOYdPD+jU8=,tag:N6cu0/DITq09XqjmUir7tg==,type:str]
                    - name: ENC[AES256_GCM,data:fgOPeIMuxEs9cXxSCmaegg==,iv:YJwxVY5JcZ+P1Lr/taz+9+Sn1A+LHfPlMF5opiGP5eY=,tag:dYhICqtnK8HR+9+0BjxQ+g==,type:str]
                      value: ENC[AES256_GCM,data:yR6f6cYkzWvTyQ==,iv:RuN2IKJ5Ry2+fu6kpt2gy8zxIyVpdPmIi90D3RjLLGM=,tag:Bviy6KJj/kAF1zpR0Ce3+Q==,type:str]
                    - name: ENC[AES256_GCM,data:4VFhp6nub9c=,iv:1J84uOVdgHMbbiV5DA18wLCgf5+SUlq5GXuIXAKXxJg=,tag:9HkvIa+B8WQCOQXr4XqFow==,type:str]
                      value: ENC[AES256_GCM,data:Cu4=,iv:GjgKvTlHejzpSo/4+ARHsBcjrURDUj4s5YrjkCgG4L4=,tag:HS9AumTvAiYC84hadxQvDA==,type:str]
                    - name: ENC[AES256_GCM,data:eJbvtZ4zAMSITPbzVfxqJJh+Qnd2vVa2HQ==,iv:jQ81RBwmSN27tA6lf1aNxROUieQzYJ/j8x9UOEN5Jx0=,tag:IcanAHPnJLCN9imS7boBZQ==,type:str]
                      value: ENC[AES256_GCM,data:8ZfkslNF2hCriyJoArvYyuzzXkp1HtjsZRo4SxiuanHbC7D/4cufpDbNQ8LKC5i+uSESc7vEqvM9Efg+zc++AwUAKg==,iv:kmA+YtCGfvwl1/N7J3qbWlb5tASWoK17FvAbmmAp4fY=,tag:9nzkaQKP1EM1t0ukUF2MmQ==,type:str]
                    - name: ENC[AES256_GCM,data:iZCzrKCssTNrKdfd7VXmp4S5Xx0=,iv:yl0JujWusdx1s6v9w/OsUmgR4XQq6X3SImxy1N3f4HQ=,tag:hA5Dr1rwJtIjp03+NnWnKg==,type:str]
                      value: ENC[AES256_GCM,data:9ogi0w==,iv:PhGz2nfdjKHXsE6TCbuQEI51v6IHPx/IIdSQY/NLAAM=,tag:6IsY7RWzKoHHbO9joYTaEQ==,type:str]
                  volumeMounts:
                    - name: gluetun-config
                      mountPath: /gluetun
                ## Deluge Container
                - name: deluge
                  image: lscr.io/linuxserver/deluge:2.1.1-r9-ls266
                  resources:
                    limits:
                        memory: 16Gi
                        cpu: 250m
                  env:
                    - name: ENC[AES256_GCM,data:fzNMSg==,iv:AGRIUmT8kW6P+EZhL6Nz3cd7vjkPkSEP7hr4eSraLyw=,tag:zQlVQyuBvOQsHbsES8r46Q==,type:str]
                      value: ENC[AES256_GCM,data:Yrlr,iv:CQHQ8g7iPqbRsMzuMuLxwx0Aawty88oPQVOB361xRnY=,tag:zK5Z0rQ6JXSzIjaMkS2nWg==,type:str]
                    - name: ENC[AES256_GCM,data:QBPYAQ==,iv:iyiuq4QNwYSlsDmE92Ok4yNguXO7bfx8wJz763iaxK0=,tag:D9R1P6BaAjA72VbzmM7Lwg==,type:str]
                      value: ENC[AES256_GCM,data:dZ5L,iv:e4UQlugA0yhC9X94nAhZPhOC6kg4R/VOn0qyTIN+Nkc=,tag:NQJ8rarQJODaVdC+WWggGQ==,type:str]
                    - name: ENC[AES256_GCM,data:dEQ=,iv:gGh83UpfY7GCvzOOcGbvNOm64odlY3f2pj+ymphKiIs=,tag:Tos7KSL8UsT32IjcOkCB8A==,type:str]
                      value: ENC[AES256_GCM,data:BOIkjB470T7+PjfTBfGFag==,iv:6iy5xgazruYci0oyoZxE1GSXOr0HWuMjlnKx+PoomFg=,tag:7PQiJdhWg0s8YFtWJDWg6w==,type:str]
                    - name: ENC[AES256_GCM,data:8U0SzvHnMshJ0Uj0Sw6R,iv:RseyqGeS8ubXQL66Mllj/vYZIM/m4mAYVSLpsxaYWQQ=,tag:m8zdLd0qnS54mThhuVOtOQ==,type:str]
                      value: ENC[AES256_GCM,data:grI1Fg==,iv:AFfBvcUxZg53zvSf1mNnPsQjeGcmq1FYxPAM2Hme4rs=,tag:4n9jn8Kw2IUqV+W+W6lXBQ==,type:str]
                  ports:
                    - containerPort: 8112
                      name: webui
                      protocol: TCP
                    - containerPort: 58846
                      name: rpc
                      protocol: TCP
                    - containerPort: 6881
                      name: tcp
                      protocol: TCP
                    - containerPort: 6881
                      name: udp
                      protocol: UDP
                  readinessProbe:
                    failureThreshold: 4
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 12
                    successThreshold: 2
                    timeoutSeconds: 5
                  startupProbe:
                    failureThreshold: 60
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 5
                    successThreshold: 1
                    timeoutSeconds: 3
                  volumeMounts:
                    - name: config
                      mountPath: /config
                    - name: downloads
                      mountPath: /Downloads
                    - name: media
                      mountPath: /BigPoolMedia
            volumes:
                - name: gluetun-config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/gluetun
                - name: config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/config
                - name: downloads
                  hostPath:
                    path: /mnt/FastPool/Downloads
                - name: media
                  hostPath:
                    path: /mnt/BigPool/Media
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMRWdLelBMdi8xSHk2RFdM
            SnJjWHFOejF1V05tcHNzL2RFVWZHYVR0SkYwCmd5ek1FbXNrRnBxWThQUnpSOXg5
            Qlc1T2FkQ2FiQk1xYzJPT2h4eG5CZU0KLS0tIG5JaHZhT002TGMvUkx1Vm1Zbys1
            Z2htaVRZMzFLR0V0M1pjZGM5QklBT3cK5TNC4p8pU+k7gOL3YD29LS+r3l6caA9I
            MHLb1Y5untLjCmJNDkVUGFuYvSa4DxuglGHR61UWcFyaBg5dVAMjwQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-02T18:58:33Z"
    mac: ENC[AES256_GCM,data:W+XSBRmJZXS6S57/AqPtmGIYONe8KdgAka78xaFBpW1+USvNqJpA6SRfHoExD46Rfg39daf6D00rZz9an1fj/sdHc7zdpuqessi3RPCIuDdvAKJ9zq0X0ep1jhmzqhn6Bd/wT3NgiEVkGlhfpY/9XOzWsvr81MZ076tP5BYKLMo=,iv:y6W3dmlb1rWqAzvcfISDDH5WTsHcn50aeXJgYuxjiz8=,tag:8aSDqLs/dF6g9mUs3quB5Q==,type:str]
    pgp: []
    encrypted_regex: ^(data|env|k8s.v1.cni.cncf.io/networks)$
    version: 3.8.1
