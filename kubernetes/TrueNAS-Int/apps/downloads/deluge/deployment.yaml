apiVersion: apps/v1
kind: Deployment
metadata:
    name: deluge
    namespace: downloads
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: deluge
    template:
        metadata:
            labels:
                app: deluge
        spec:
            containers:
                ## Gluetun Container
                - name: gluetun
                  image: ghcr.io/qdm12/gluetun
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                  resources:
                    limits:
                        memory: 2Gi
                        cpu: "1"
                  env:
                    - name: ENC[AES256_GCM,data:Ejk=,iv:FkdPwlLpzyWdOiE7A79JvNEgw6p7dTBs1E5ZWUpLtog=,tag:873Xf7bAIuIpbMnGx8osCA==,type:str]
                      value: ENC[AES256_GCM,data:uEDOog1krWBHxuQvTUmPYw==,iv:IP3MmXr7CwJrD5GNaB/HQ6Eo9vxsraYvVLumeS9bMx4=,tag:eNXrH/lCLEcOQKKxzJfI2A==,type:str]
                    - name: ENC[AES256_GCM,data:g4b3o18FgLgN03ubsLBQq3ue+hU=,iv:JpnqLktIaqe6iQg2PZdfw2nzBAujdj593GoapwQ2u7w=,tag:rkDvD/EkrFavE8BJJCzfxQ==,type:str]
                      value: ENC[AES256_GCM,data:C9IKdikGw8qlH76V/KWmxAI/cP9RC8k=,iv:xFooHKXeOjdFGMMqxL28JdlCZSMSD8BH8oKSDIc22YA=,tag:MrPuSp8ZmX3f6ZGaA1rmEA==,type:str]
                    - name: ENC[AES256_GCM,data:26TQnzIVv0zOCkT5DMM=,iv:OPoH8FBkJIuC1j6Rv4uDDxvY2B32yZVV1Q/aC1xO/uc=,tag:S/m8PT6zcu5JCqx1nCK8fg==,type:str]
                      value: ENC[AES256_GCM,data:TWQybGOgF9x08xM=,iv:L3rhJcEo3Aw7XlpWBz6092V+WCRndxx0gOiPZoW9W3A=,tag:ATIjVVGVU9OO4z4cgSh1Lg==,type:str]
                    - name: ENC[AES256_GCM,data:7B9+SM3Q6mcq6aTe,iv:bvMUHbLgmAg+41w0FZRtrSrGRCvreYQd+c8/DjZzCgo=,tag:OCEmlgzMZM3zqMW9PZlE/w==,type:str]
                      value: ENC[AES256_GCM,data:Hi+PFPy0Q2I=,iv:VTpbiKuwe9SH863r/8m15XK02Bqu4SkLfPeHemLTe50=,tag:eQCyPvczV5DRmxTajgpmnw==,type:str]
                    - name: ENC[AES256_GCM,data:O6w7hbVzxQYGzy/qyslIwQ==,iv:OnKkZoINmbgr3/AsgoXZnQRpsIpmanyuFJGj7FcMc3M=,tag:lwIGKzmcCOu8fTOJpK1cfQ==,type:str]
                      value: ENC[AES256_GCM,data:MpNO7MHaj3yMzA==,iv:9ggclOX6pUDYD0R/Y6T5YZ085ZoaAaLtrO6+5LMfIuw=,tag:aBZ+WJENomOHPSHpghSrnA==,type:str]
                    - name: ENC[AES256_GCM,data:pdY3YJLAtZM=,iv:GTm7xrSzJ5fmEpEl5C+AnxdVEgCkMtc6e39fAqQYSe4=,tag:RNAtm+TIPXxieRw/zOWtLA==,type:str]
                      value: ENC[AES256_GCM,data:yWQ=,iv:25cU0ryCZVQTf2OnbaTXtZnqFADveiG1mWb02amW6CA=,tag:Mny+grpwiiXaCNbtQ5nI8w==,type:str]
                    - name: ENC[AES256_GCM,data:fav96xjmh+mwVoFKUyPyQT9lp0XTQQx5Kw==,iv:cWYBkT9q4sArpHK6OJ8NiyAc35Q73/MFOkwEWj0if4M=,tag:OpQt1HtJ05zxLvJ3TJxDpQ==,type:str]
                      value: ENC[AES256_GCM,data:vZC9W1k6zbKM57VBO2BBttLCuY307nvzAZt9EDCtqVYYnUOTHwHpLxmb8FJlaeJyBvboSsu7ado27Svz1msSn+vHKg==,iv:qzC0uOVzBw1Hz5zoUHwJ6z/McOHnihZjygFeiQjjYPw=,tag:bUmWJBUoQNntuVW8ikVKMA==,type:str]
                    - name: ENC[AES256_GCM,data:1k7XBHgn9WkL9bLI9E983EtvBx8=,iv:t+bits2G2jK45kReh5CVToCrDZ3eHBqU9i1Ocm3PBww=,tag:c4C9jwFJtShaAPaojXk8Sw==,type:str]
                      value: ENC[AES256_GCM,data:Wb+foQ==,iv:ofuSZiz2IgF8wLMQyRTnX6ZzlWYIx2OmJcEEL3xz72I=,tag:QQthbQcOzcEXeSHswDoEIw==,type:str]
                  volumeMounts:
                    - name: gluetun-config
                      mountPath: /gluetun
                ## Deluge Container
                - name: deluge
                  image: lscr.io/linuxserver/deluge:2.1.1-r9-ls266
                  resources:
                    limits:
                        memory: 16Gi
                        cpu: 250m
                  env:
                    - name: ENC[AES256_GCM,data:odKbyA==,iv:QYAoq/z9NNt0Z+0bbGOHmYo75tVwUzKAoI52Ub0izeY=,tag:o2gziausqljiL5LanzAQlQ==,type:str]
                      value: ENC[AES256_GCM,data:isnC,iv:pazGNCNIgJ/Uji0H4YAKkiajqQFLPo1fQJHSDB9U/iU=,tag:EwTsQps6bb2M/tniDkD9jw==,type:str]
                    - name: ENC[AES256_GCM,data:RO9OgQ==,iv:IeSAxrJKlRpATv8L1bs+pGlYbFMvj6VZUFhorFeNd9A=,tag:9GDUMx8LBtCJppp+84cW2A==,type:str]
                      value: ENC[AES256_GCM,data:uKoQ,iv:bCiHDlkh1V+8fkm3huaE1dONWRgEzE8Co7roub2OkXc=,tag:ubYMWOZrOdvTMz7X5+/eiQ==,type:str]
                    - name: ENC[AES256_GCM,data:17k=,iv:ije9UKMct9TUhfxzLI2/wIdQPBVaqpTX/tQ02cbfSEw=,tag:uCCeZUhGoyX+9vkNQJUh6w==,type:str]
                      value: ENC[AES256_GCM,data:Ea+qsuyfG5lfwHjBn5KfjQ==,iv:uzmF5WzMi+fURdr+I+Yyy4v1gkXDYCQJSp4Boa7qum8=,tag:U6YjugRa34ol5I/Rg76/kg==,type:str]
                    - name: ENC[AES256_GCM,data:QmzgxVoOkFhPx4yuxwHo,iv:cd8aHIVwHzN+mDeJcVCz1mSaSYP8ECRcVDftAsVRQ3g=,tag:jvLrVMo5zWQ78Sliuv8RaQ==,type:str]
                      value: ENC[AES256_GCM,data:VxHKAw==,iv:QFTCvNq0LfzE5BamgXa8eYVp2OFphyQ/PqVjQQrwzY8=,tag:zmdfASleU8DKKZJ2LgxdaQ==,type:str]
                  ports:
                    - containerPort: 8112
                      name: webui
                      protocol: TCP
                    - containerPort: 58846
                      name: rpc
                      protocol: TCP
                    - containerPort: 6881
                      name: tcp
                      protocol: TCP
                    - containerPort: 6881
                      name: udp
                      protocol: UDP
                  readinessProbe:
                    failureThreshold: 4
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 12
                    successThreshold: 2
                    timeoutSeconds: 5
                  startupProbe:
                    failureThreshold: 60
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 5
                    successThreshold: 1
                    timeoutSeconds: 3
                  volumeMounts:
                    - name: config
                      mountPath: /config
                    - name: downloads
                      mountPath: /Downloads
                    - name: media
                      mountPath: /BigPoolMedia
            volumes:
                - name: gluetun-config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/gluetun
                - name: config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/test
                - name: downloads
                  hostPath:
                    path: /mnt/FastPool/Downloads/test
                - name: media
                  hostPath:
                    path: /mnt/BigPool/Media/test
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZMmozTjFGekMyWlhmdDV2
            STUyc0FYT3JZdnRKb1R5aTY0K0QwSGRNTFhVCjA0VGNSSFljaTh0MFEzM3N0WCt5
            akh3aUZCYWlRYnpkM041Q0szZkVjMjQKLS0tIElidjYxdHZNOGxjRWMxR2dqOVlQ
            cEw2cHNkTTUrc3lOajc2NXZJbGo3RDgKYqkVqZ0CDnTwoC6fM5a4h0SQEemdw+L0
            OaNX7gKilOSDM1K9/aJVkoJ1n48GbvuEKxeISqrEi0fNOuyUmRv5rw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-02T17:19:57Z"
    mac: ENC[AES256_GCM,data:wiBEUwqzfVBdPmiQZGn59pEPh6e8eciMbnSWad0kwkv4X2FLCynA0uH/TetsF9fQgQxTma5ZOv8jSQtG3l9Ax/4h5bYz+V424rt3FbxVzmqhhu9JV55TXsRHrkA9Wsv1jtovOp3jKaqTitzcut7eoYuhm/8vivWHdK3F1X47ezs=,iv:nEs+Nb+HcgIsmiuoVHYFE0/bPe49RJdNVf2wodx8z/g=,tag:CAYOG20pKQ2BfezIjwo5UQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|env|k8s.v1.cni.cncf.io/networks)$
    version: 3.8.1
