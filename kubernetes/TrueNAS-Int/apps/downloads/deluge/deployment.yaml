apiVersion: apps/v1
kind: Deployment
metadata:
    name: deluge
    namespace: downloads
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: deluge
    template:
        metadata:
            labels:
                app: deluge
        spec:
            containers:
                ## Gluetun Container
                - name: deluge-vpn
                  image: ghcr.io/qdm12/gluetun@sha256:e71f503a769e3e647e8a600a6fb25b6dc11b03a41f5abfa525cf70935970c0bc
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                  resources:
                    limits:
                        memory: 2Gi
                        cpu: "1"
                  env:
                    - name: ENC[AES256_GCM,data:sTJt9g==,iv:pryBrE5NA2c1hXtdiak8naD/UZ7IVwwR9gki/iEhx3Y=,tag:hE40WrfH2hz9e6hptaKMcQ==,type:str]
                      value: ENC[AES256_GCM,data:tHQV,iv:S/CdCBzSi/qxpkDdTpTDYbjDc36COgFxpV7P3h0SQG0=,tag:X+nsfcMixvI7mS5VLIXWMA==,type:str]
                    - name: ENC[AES256_GCM,data:YXtaGA==,iv:A2f83WBVT/zLnqbzl3kinZ40GNSS6IkuR+ej8ORDB1E=,tag:OBvDaw/8FmaDWeexCLjJmg==,type:str]
                      value: ENC[AES256_GCM,data:tMhs,iv:l5ShLJbnWoGkU62uMPjsRTfnUmXj+dun1AsnIFQMiro=,tag:5Ea+Z355AJeS8xbg/4+WEA==,type:str]
                    - name: ENC[AES256_GCM,data:TeI=,iv:ZjXBCT1NUKmNkfx7wLLfQqy8cfSsV5RvJ3nVKA+RHDQ=,tag:MXtVi1bINT1UEBGojeZc7A==,type:str]
                      value: ENC[AES256_GCM,data:0Ku86fnX7dcDg02rc70ZGg==,iv:9vRDkcXA7jQvZ8nNiLXSDHJxJM0+OyKLb/MJdywOZCE=,tag:FhUzSe9sDpfsl1CaCaJQJQ==,type:str]
                    - name: ENC[AES256_GCM,data:EKPu5cdCJwDbe8AJtz1VavzW6/Q=,iv:yJ3nxT5L5fjvas6CLn/A5RnE+sKrZWeEHkTNnHu+O8o=,tag:TlpOf+QE8Dknhe6WfpEVeQ==,type:str]
                      value: ENC[AES256_GCM,data:UaaaZLH17N9jcXGxccTdZab/qWW3a+A=,iv:aKjA/PujTHu91bGudfqqN4Tb7JKCWp8SM8WvAMDh6Qo=,tag:3v0pji3lTU4t7GlzAaUkIA==,type:str]
                    - name: ENC[AES256_GCM,data:CFJMaLUJnNhIXxXziL4=,iv:Kp3XG4GEavrDI/0HVoiU/bGINBT8ryIftEwuOQYIDnA=,tag:RfzsGVmhZulymVAtgOyvvQ==,type:str]
                      value: ENC[AES256_GCM,data:UfrawlSIAuLV3oM=,iv:jllhkhLownlagL/1nydlOQE3PXz4ZgHUeF8WdA3Vn2o=,tag:K+KV0REa8Evk70qMg7aueQ==,type:str]
                    - name: ENC[AES256_GCM,data:YlllLibV5c1DJaYg,iv:9Ff+oKKwdHGiTO35XF5E9bjsX0v2Ntlrhhl6spuvVRw=,tag:AGQANngFzZcHZeDlg0rDnA==,type:str]
                      value: ENC[AES256_GCM,data:tVkfc+iEZzg=,iv:eSTYhAmfp1Ek+caJ9RI1TnEaYZwo/5peeNEhCDSS/Ig=,tag:5m5XMqa7lQmHqZPsu4sAPg==,type:str]
                    - name: ENC[AES256_GCM,data:wcJFEpuIyzzaJJhWtC4ZIQ==,iv:ZYrz4HfBk0tWSDsOwfB7hGiO5Pcqaf4ngTc0s9P+bI8=,tag:kt4KgMDqjyvTcfOIYHDWyg==,type:str]
                      value: ENC[AES256_GCM,data:RNkiN2ef4SfvaA==,iv:q2EU4hliaHAykOcmtp2idZRALvuIWSbEF3hYuRTAAdc=,tag:4/1NvkgYUq662ppC1a9LAQ==,type:str]
                    - name: ENC[AES256_GCM,data:WcOP2dxSo08=,iv:6C1qFO5z+Jn3f/M69cocmr+R8krOaeAuPG3/fCv6JD4=,tag:p/HpUI0dbfC14NpCTS26uA==,type:str]
                      value: ENC[AES256_GCM,data:TMo=,iv:OAEB3OC8fRRrM7lFwYATDWIQdFrxGI+UYDrbQaubMzA=,tag:H4RFNriKr1+seU84hwkU4w==,type:str]
                    - name: ENC[AES256_GCM,data:R9lCOEFEEO3Cvq/wLWL9i+2sjtlHDa13/g==,iv:INKQxHQMl/9o+OyVYnmozmgxFfRzwWM1TrZSJZMwyRg=,tag:S7cM9cyrqSnjIG4Mlykdtw==,type:str]
                      value: ENC[AES256_GCM,data:lWLLC/Qqle41KjuRPMcDwJhP7tRhb787u8x9OLBSK6QrJw4WAUdCqmzNK5E1/Jlmzvxe0pvL3RvhdlTNrkzkUBta2A==,iv:7VWDiWtsrx/cjDtz06DSUybOV/nnFpzUN42hF4s5uAA=,tag:+pcfkvP9/Nm5qxtoI7NRcA==,type:str]
                    - name: ENC[AES256_GCM,data:aL0WKI3ZQRN5/DPKpSs2JQ8HhPk=,iv:clnoiD8OskaHsb1oAYIU++pK/ZZ49Qucsj8dVKipLLM=,tag:9Py+A76LsT7Qo2N+nWoMcA==,type:str]
                      value: ENC[AES256_GCM,data:aBjKRA==,iv:aTP/gWC2ks+d+67QRLAtIpgGwIjLxNoYqcvbQ8inZh0=,tag:lIi2+iU/5QjTKJwDj2j8dA==,type:str]
                  volumeMounts:
                    - name: gluetun-config
                      mountPath: /gluetun
                ## Deluge Container
                - name: deluge
                  image: lscr.io/linuxserver/deluge:2.1.1-r9-ls266
                  resources:
                    limits:
                        memory: 16Gi
                        cpu: 250m
                  env:
                    - name: ENC[AES256_GCM,data:97twHQ==,iv:BJXwykF+AgVag/y+R8SzCdmVcA17IHs6hXRs3DXRfbM=,tag:8NDKMvECCy7qC23HOxlaVw==,type:str]
                      value: ENC[AES256_GCM,data:wJSZ,iv:PTQWx0ksOa8YZkADgnLBYDaHhWedul6H3wqpySHXK1I=,tag:Sb24tKRB0wDaOeeY6UCi9A==,type:str]
                    - name: ENC[AES256_GCM,data:gTpN5w==,iv:FZzJ/bxia4AQH8cgM4wAmqraf1EQp1VyX/sYA6LZIhs=,tag:xlfa4d+PAhkT76E2nEkXcg==,type:str]
                      value: ENC[AES256_GCM,data:9Zth,iv:iuLQ6QoVbVEL3FGqLceR42E4Vrfrvo7O8/BE3ohKUjY=,tag:FhcmS7OsrftJlZaLgYwTPQ==,type:str]
                    - name: ENC[AES256_GCM,data:4vU=,iv:/CFpDI+nm9fqpnkOlLAcKfy0F5wCTB7Bp10SOyFOQKg=,tag:RXGlSMdShLBbdZPrGCDXBg==,type:str]
                      value: ENC[AES256_GCM,data:85vbUDcxH1o3wzxYJPB4Kg==,iv:fX6+BhDPg017uz/vbHTuS5LAPUV66NuHCqhe/oFl66Y=,tag:RzQVgL9ORUZ+fT53+oKK8g==,type:str]
                    - name: ENC[AES256_GCM,data:PvhFaViUB4v1TQd6Y22s,iv:gL17alF69Eu4JEIlZAv4woW5kLmMrMfF2cN7NqnN73w=,tag:KFtzQfcFn514UI8mhw83zA==,type:str]
                      value: ENC[AES256_GCM,data:QpkwOQ==,iv:Swr7LhPnTfVVvVcMJVbRxjQ4RbxRwxKwrlhNQfbwALs=,tag:55meGXeajkMZ0E8JN6G5kA==,type:str]
                  ports:
                    - containerPort: 8112
                      name: webui
                      protocol: TCP
                    - containerPort: 58846
                      name: rpc
                      protocol: TCP
                    - containerPort: 6881
                      name: tcp
                      protocol: TCP
                    - containerPort: 6881
                      name: udp
                      protocol: UDP
                  readinessProbe:
                    failureThreshold: 4
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 12
                    successThreshold: 2
                    timeoutSeconds: 5
                  startupProbe:
                    failureThreshold: 60
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 5
                    successThreshold: 1
                    timeoutSeconds: 3
                  volumeMounts:
                    - name: config
                      mountPath: /config
                    - name: downloads
                      mountPath: /Downloads
                    - name: media
                      mountPath: /BigPoolMedia
            volumes:
                - name: gluetun-config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/gluetun
                - name: config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/test
                - name: downloads
                  hostPath:
                    path: /mnt/FastPool/Downloads/test
                - name: media
                  hostPath:
                    path: /mnt/BigPool/Media/test
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0YUowMUpwWDdRQW8xRW5T
            eWc4UTI1VmNlVlNyc1ZDMHJYdm1UUXdzWFRNClZhUWNTSkxIY3ZOdmR3VGx0UWZN
            SXduS2RwRWhjanhReUN0RklGQ0pYZk0KLS0tIHJ2Q0pQTlBRL2hRUG55eU16dFl2
            aTltYWRzc2dLT0MxK0QwMXFPV0tscGcKxQzHcDKcwEShJ+13RHXNeTc9lK7OZden
            HyC85/gDnhhne8I2H+4UYdXML7ecHyJailN7cIwnEXNqI+39493c0w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-02T17:35:42Z"
    mac: ENC[AES256_GCM,data:kIIhQPegARRbyqY+EpCmZTgtCXov5tjb3E7CO1Tl0mu9A+LF3AiWcQ18UUyBMA1gb3jYOJgT5RoIJOrst1Js2WtxKPJYDD4YXoB7JX7Ec+c+BloOryHcTs8L9y/k5rpCrra9P5tPMdYSqOelggnmL6d5YjvGB3IoFMOBDveW9ik=,iv:UgZCE3lOPpgJoPmn5xmuyg91z7GE3JOpewc93o6m5hI=,tag:Yc0Wy+Jxhit3o8QZA5zceQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|env|k8s.v1.cni.cncf.io/networks)$
    version: 3.8.1
