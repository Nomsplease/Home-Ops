apiVersion: apps/v1
kind: Deployment
metadata:
    name: deluge
    namespace: downloads
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: deluge
    template:
        metadata:
            labels:
                app: deluge
        spec:
            containers:
                ## Gluetun Container
                - name: deluge-vpn
                  image: ghcr.io/qdm12/gluetun@sha256:f30769d7476d3251aaa5f166d1ec3ff1954146b9a749a469184695f2f33c5abd
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                  resources:
                    limits:
                        memory: 2Gi
                        cpu: "1"
                  env:
                    - name: ENC[AES256_GCM,data:FygHIw==,iv:8upo4yheq6QiM9nKCkmelbveuCJBQr/ZP9/hztozSJs=,tag:hPufVqnar/b5vbUW0MYf0w==,type:str]
                      value: ENC[AES256_GCM,data:BlpM,iv:G5Hx16VcflIB5HD34tscfGtwslT4DVy8n7sBC7GnRAg=,tag:Hgn6cwciqZHXBboPPA73dw==,type:str]
                    - name: ENC[AES256_GCM,data:dk4WrA==,iv:7ex0XULUBHIR+MDrYzYBptEIjiM64T1ubbmjiwYTFW0=,tag:4tq5NwST3FPxlm+UYl03JQ==,type:str]
                      value: ENC[AES256_GCM,data:XjL6,iv:EZCdTHrEbAi+kh6HwC9WNw0gJVmCqWoezCFzqFVe+a4=,tag:4gpN1jF7o034H5/0wWiXCw==,type:str]
                    - name: ENC[AES256_GCM,data:pws=,iv:/2boPbZEUZNLihnEM1Ew4T+KIJk+1JkJsUOJ67rQPIA=,tag:90Tr8tnbKwDkZ3is7sUN4Q==,type:str]
                      value: ENC[AES256_GCM,data:gku5fIbAbAeEDyJm4y+9HQ==,iv:+sl1rfNfXPMptofOAMQij8tA3dBEFseZmxNT4tashgA=,tag:IOJIYK5slTtUFQYqstyNrw==,type:str]
                    - name: ENC[AES256_GCM,data:7TE3/nGT/HmrJu1HceUEbog87gg=,iv:GNOdRVmTTVpEkRUhyVK5BmCahjVHtdmz0k0G/7mkAWk=,tag:gIUb+lL2H8IvqP1QCNgYKg==,type:str]
                      value: ENC[AES256_GCM,data:DmYHqMDiaNH8EeZOZYBj9vVznJwZMVI=,iv:XBfk8iqDFm9PUKMCS855iyvdF6uI9IQGQCLNElAQvXk=,tag:cfZEUwNkVxB7uTOE820KCA==,type:str]
                    - name: ENC[AES256_GCM,data:KoB8nhw5pYA5MAqbPqw=,iv:UVrU/H7X56V5Auk56cAjxlSPlYJPPyZx0SmvomZiHxA=,tag:SP+wMDEbXuNusAiXLDiFew==,type:str]
                      value: ENC[AES256_GCM,data:qx46AenJ0hQDPXdqrlWb+w==,iv:wP6bpIG9m4A0b0GsAGr2E7N4MSd0vnhyC7Ow2Bk4gBk=,tag:UeHO0vvQHDBcku9YdRTrFQ==,type:str]
                    - name: ENC[AES256_GCM,data:vyBnLlEZ6uPOpQiz,iv:XrHWA2rrzAl4yqnNhFUqBDKLnL4uT9CgqzW5VH7g0tE=,tag:CaZ1ijMibsKBRD4CFiS95Q==,type:str]
                      value: ENC[AES256_GCM,data:d4ZHL80fdu0=,iv:2vyOl4HTulV46NF1VQBx+WxGLwDoSI4b7U3tXv6yYXM=,tag:M5AvXgcO87rcJe5JlkXQQw==,type:str]
                    - name: ENC[AES256_GCM,data:Lmba2dIQRXrmrwBhcZ/9sg==,iv:fDiFL5hnZa9R1hF57SBBYNNeUwLXRcXu2RBi7xOOgnI=,tag:aMXyjJblRrDlGfzXCcxC0w==,type:str]
                      value: ENC[AES256_GCM,data:M+pOpB2VR+TCNg==,iv:stQ9BZwGnKcEYc6duAxzoggnyxihB6KYWupceNmSk74=,tag:o0BP9wicDAPj48RIUj+vmw==,type:str]
                    - name: ENC[AES256_GCM,data:aRsTDzgXMJ0=,iv:klES/TBLxBt075iaCBANxgY/anOr1FuWuevXhuMkyi4=,tag:g88E2pH3G2XM8LZBOVUOrQ==,type:str]
                      value: ENC[AES256_GCM,data:E0A=,iv:ePYXndsQ/xV07MjbmY7Wk0zjuYNku0kT3sEVAbj7tkU=,tag:XqlHFtUsCcYeGXzpe9A22w==,type:str]
                    - name: ENC[AES256_GCM,data:YQpcQeQjxsjGxw7hPgGimxlh8LtIg3UUJA==,iv:3BYE/SeMjDj43iP+dQdqfQ0rjVktCuYfNH8FzZApR2o=,tag:g0axM6BJohi8ks1202tTXA==,type:str]
                      value: ENC[AES256_GCM,data:SHdXhav/hHg6tHpmt85Nwp4IrCujNXoO9ftqN5t6e24wqO+4MGMy2khpwDuZv6WcxkUPanGmgA2d5f6WXeFC4ZR6YQ==,iv:PShizy212obeEH+DZBUYm5d30z0bwsLlL9G1B/ceRQc=,tag:Ph8AVQLEfxBtTWE5kRuOGQ==,type:str]
                    - name: ENC[AES256_GCM,data:VI6ZTigN/aVLHAQKgpkymB3PCAY=,iv:3/saYED0TbNqLP6QicvR0p2CJ9s8soCOST/OgEjacEY=,tag:vfqrxSW5wtpZ0Ghbf90oKA==,type:str]
                      value: ENC[AES256_GCM,data:OJ3IVg==,iv:sN4E7xA2tDVfoj0bo5vXmXoEGe3nOlm7jfcEmOfOkck=,tag:txMZ48kYSWYYlDlnSw73sQ==,type:str]
                  volumeMounts:
                    - name: gluetun-config
                      mountPath: /gluetun
                ## Deluge Container
                - name: deluge
                  image: lscr.io/linuxserver/deluge:2.1.1-r9-ls266
                  resources:
                    limits:
                        memory: 16Gi
                        cpu: "8"
                  env:
                    - name: ENC[AES256_GCM,data:U9bs6A==,iv:c8W+wNurD9L6aq94duDH7qO7XtV8y5UcLGFsanS4otA=,tag:6OlNsyAC2/Y6GjlOfGYVsg==,type:str]
                      value: ENC[AES256_GCM,data:cJ4Z,iv:TnaE8mx1R3aK4VkvcdgBr2QaHVKq6MP+YJQGuyNMWEY=,tag:9FitpDWyEbvrUuRTBWB/Aw==,type:str]
                    - name: ENC[AES256_GCM,data:TGoOUw==,iv:0kV8jjZMu0x/B3yLa3kt17nJdxR85ub4ak6t0WrvSe4=,tag:vQCFNXYX6nfsyF4+d5XNBA==,type:str]
                      value: ENC[AES256_GCM,data:XpCE,iv:MeA9Y5XOjgD8cJyTeOnogbgN4UbsQVibtR1E2o9qtoM=,tag:VBXqb+By6Lrdch6cfT5Jog==,type:str]
                    - name: ENC[AES256_GCM,data:vX0=,iv:arlOab7KiSzLRcffBpb75kWBssmmuyMsPnjuYiS+qkU=,tag:rP6nLLe2EdYRjBIFdSNDuQ==,type:str]
                      value: ENC[AES256_GCM,data:qrbInOk4Gw6VGM9vXIsiRA==,iv:j3swvOuoo57pemSw+Eo5ND1Vjt2w3kpSJK8L7+CXgVM=,tag:Kn6LPSk/xgDcf0KGCCtcSw==,type:str]
                    - name: ENC[AES256_GCM,data:FnjAgrI2Qcia1JAU9+Ir,iv:qyN5RqkZp5+IGST4pz7xUXOGHWSLSgLb+pxoZZsmmyU=,tag:ImyLu1UtZtqDSiBg0tbHlQ==,type:str]
                      value: ENC[AES256_GCM,data:lvtb9w==,iv:CmRIYmZ80t2xTpMf0wA/rfDNWl9uWQI3YQZzrTFsC8g=,tag:vgg4DKEKSTpT/kdEr2XB2A==,type:str]
                  ports:
                    - containerPort: 8112
                      name: webui
                      protocol: TCP
                    - containerPort: 58846
                      name: rpc
                      protocol: TCP
                    - containerPort: 6881
                      name: tcp
                      protocol: TCP
                    - containerPort: 6881
                      name: udp
                      protocol: UDP
                  readinessProbe:
                    failureThreshold: 4
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 12
                    successThreshold: 2
                    timeoutSeconds: 5
                  startupProbe:
                    failureThreshold: 60
                    httpGet:
                        path: /
                        port: 8112
                        scheme: HTTP
                    initialDelaySeconds: 10
                    periodSeconds: 5
                    successThreshold: 1
                    timeoutSeconds: 3
                  volumeMounts:
                    - name: config
                      mountPath: /config
                    - name: downloads
                      mountPath: /Downloads
                    - name: media
                      mountPath: /BigPoolMedia
            volumes:
                - name: gluetun-config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/gluetun
                - name: config
                  hostPath:
                    path: /mnt/FastPool/AppData/Deluge/config
                - name: downloads
                  hostPath:
                    path: /mnt/FastPool/Downloads
                - name: media
                  hostPath:
                    path: /mnt/BigPool/Media
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB1TnRkSVI2SVlla2YyZkZz
            TEltbXZ5T0JyRVJLNzNtb0FZWDMveDV6Zng0CjZRTk03ZkNZSjkxQ09UaXRLZHhq
            L1FTWnBuQ2hkTjRqbk1vNmtLNE0vQkEKLS0tIFpGM3lvM0w2Uk93V1dlRWZBSnhU
            TThmNlRlcVlSWi9ybnJzRzdaZTd3TmsKNvcuO9SWelDqDw2xhlOcseGE9/C514cE
            bC6tctonIbiALj0UffvvwZ0t8GOEUBjiUKVGQkmxoC7pt1RPBp7i0A==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-02T19:05:18Z"
    mac: ENC[AES256_GCM,data:o0/YsSPx3xULQfk58ZSiENsfihNHRAD6JFPN9y7ueWXcnxn27R7M1U15wzgkFpNFRvAtThIVmIASl5YQdBr7P3qiOAI8nT5opTOKPPqGZzn6rnxJtLCQU4yvE6VnL3jpBMAY28WTvlH0alFolg0o57zhJGA+bihfalq7S3ojlvY=,iv:eqz/GO0/wnyaErvijbX5cAdtTBefDI/kkO02ntB+3l8=,tag:Cbq6MBQpQd+JY18sAEbo9w==,type:str]
    pgp: []
    encrypted_regex: ^(data|env|k8s.v1.cni.cncf.io/networks)$
    version: 3.8.1
