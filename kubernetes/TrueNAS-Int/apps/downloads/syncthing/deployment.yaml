apiVersion: apps/v1
kind: Deployment
metadata:
    name: syncthing
    namespace: downloads
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: syncthing
    template:
        metadata:
            labels:
                app: syncthing
        spec:
            containers:
                - name: syncthing
                  image: syncthing/syncthing:1.27.6
                  resources:
                    limits:
                        memory: 1Gi
                        cpu: "4"
                  env:
                    - name: ENC[AES256_GCM,data:SSju2Q==,iv:tPddKOGRVoiI4XAIPBRxipXSpuSEoEpqmdmM6VW60Ik=,tag:UDwuc3KVDwzrRQrS2+bGZQ==,type:str]
                      value: ENC[AES256_GCM,data:bRQV,iv:0AXqOLC/aLElGl/eR0T1XkK8T6uccGzLIC+6wFtLnwY=,tag:6bgwlFJFOaIZiPoSep+fIQ==,type:str]
                    - name: ENC[AES256_GCM,data:BGF7iw==,iv:3X3c76trHs9W05UK3UOI8LWMkwKpWSlJmPSJmlEdTWI=,tag:Q8uz+yX23udSlieza8ejwQ==,type:str]
                      value: ENC[AES256_GCM,data:kfmO,iv:ZHwoOAI4aIlv+fmEAKs/kpGDRoIoNr01bOo1EnK2fbk=,tag:jFwX7SvrGopmwJyF3apTbQ==,type:str]
                  ports:
                    - containerPort: 8384
                      name: syncthing
                      protocol: TCP
                    - containerPort: 22000
                      name: to-listen
                      protocol: TCP
                    - containerPort: 22000
                      name: to-discover
                      protocol: UDP
                  volumeMounts:
                    - name: config
                      mountPath: /var/syncthing
                    - name: data-bigpool
                      mountPath: /Data-BigPool
                    - name: data-fastpool
                      mountPath: /Data-FastPool
            volumes:
                - name: config
                  hostPath:
                    path: /mnt/FastPool/AppData/SyncThing/Config
                - name: data-bigpool
                  hostPath:
                    path: /mnt/BigPool/AppData/SyncThing/Data
                - name: data-fastpool
                  hostPath:
                    path: /mnt/FastPool/AppData/SyncThing/Data
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVQXFhSm5CbkR4dEZMdzJr
            RjdCWGpIbTA1eTRPSGcvUjlURVd4UjZZQnh3CmUyOTR2YzE5VXR6SjQyUjNwcjdN
            RUZSQ1hoNHlCbnpGVjhIYXB1aGxMblkKLS0tICtXbDYrWmMyMFJSL2hUTXEzbmNs
            ejIvYlh1bm9YODZKelBaNUY0UFNVd0EK4kThm3qpM9ChUL3iykI6uLT0qO8zDzec
            HRt+6gwYClWUCLGflBbOHrbJtOUE8sCGz1/02UxxtW7fhkfBK5I7dQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-05-02T19:05:42Z"
    mac: ENC[AES256_GCM,data:SimR54ZGhRK3l+lVW1dbAtNGPySjacP03JtC8LFJv1Mz135iwnjPKrZXRbeDSZht/Rlf5ORSqJWE1kFhRfmF1fmLhz7bIscjKQXryoaYhdtSucQD8RDjcabSv/MhB8ZUMl7CA0TlMFYAZ0FUwjY7N0uUCgP7o+v4Dvlt/vg8TJA=,iv:GIDjyjoXM0nj9vu1rEMqy4mUfBz2H967KegvgTdVtGo=,tag:rVSCsjUMBGFkoCXGNVQW3g==,type:str]
    pgp: []
    encrypted_regex: ^(data|env|k8s.v1.cni.cncf.io/networks)$
    version: 3.8.1
