apiVersion: apps/v1
kind: Deployment
metadata:
    name: samba
    namespace: paperless-ngx
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: samba
    template:
        metadata:
            labels:
                app: samba
        spec:
            containers:
                - name: samba
                  image: ghcr.io/nomsplease/samba:4.19.5
                  imagePullPolicy: Always
                  resources:
                    requests:
                        cpu: 512m
                        memory: 512Mi
                    limits:
                        cpu: 1024m
                        memory: 1Gi
                  env:
                    - name: ENC[AES256_GCM,data:sACFxqRC2kFPZHlM,iv:a+w7d+Butxw6bClPYpA2tiHFHUmP0FeIA+UruGBu6gQ=,tag:CxT/dVbNMRp1eImEoUHhjQ==,type:str]
                      value: ENC[AES256_GCM,data:RD0kfA==,iv:3uU0AKV1EkWlYazMFBdEhG0xqkOelmcSqBl8sjAPyYE=,tag:HbEKARu0ApwFrboF8gMbfQ==,type:bool]
                    - name: ENC[AES256_GCM,data:fK176j/p,iv:dpFU/jb2hvUODKAY2M0j444kmZh6aidc8beXdM0HhsQ=,tag:1g6KYf9WRogrYRmJ5iL1Bg==,type:str]
                      value: ENC[AES256_GCM,data:8Bm0BvQ8cZg78hd1RVzlYdhZraW7,iv:PZu0RVsgtCra013lI/RSWFIofK/r8EmrnmAsPSJSi1A=,tag:cUCpSnTzOEoA+4icxFJVoA==,type:str]
                    - name: ENC[AES256_GCM,data:wADSQA==,iv:nGVDW7wsr59kVg/UcRS5DPHpDkwvG95Vt3osP/Sl2qY=,tag:vxDMNB4W0udqopIktGMbfw==,type:str]
                      value: ENC[AES256_GCM,data:8ysmDOo9Uw==,iv:fRwAgWsVKf4OI0yeEXyf8YTOuNEmnddHInE5UxOjn/Q=,tag:nhf8QGAQUbrvZ4B48x4PSg==,type:str]
                    - name: ENC[AES256_GCM,data:UwO2CA==,iv:omgy8lul9UsTfD+BhLp3RgU+EY11txdl2kNcdXBZU1s=,tag:Pguy64lYJaI2W+oJS03azg==,type:str]
                      value: ENC[AES256_GCM,data:QahkQc/jjpO4mywq4pU=,iv:8FPVYCxJimWN7L+FKzZ9zz/3YW9KmQ6xXZwln6+BBoM=,tag:cfmmonC4+mcdKKTH9sBMPg==,type:str]
                  volumeMounts:
                    - name: config
                      mountPath: /etc/samba/
                      readOnly: true
                    - name: pvc
                      mountPath: /export
                      subPath: export
                    - name: pvc
                      mountPath: /consume
                      subPath: consume
            volumes:
                - name: pvc
                  persistentVolumeClaim:
                    claimName: paperless-ngx-pvc
                - name: config
                  configMap:
                    name: samba
                    items:
                        - key: smb.conf
                          path: smb.custom
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBbDVvejdvbzcxTTV4WCs3
            RW9wbVJMS0l6Vit1T1BNY20xVThYOEVwamx3CjNNdjB0TXFRRDVoK1ZzWGpHcHJ1
            aWpYT1NYTlA3bnVJZTZKM2lKRU5TSnMKLS0tIGpjUHREUXdnY1pEaUFLdUNZYnNN
            RmRzaERqM2E2N00zdWErb1pING5NMVEKF8ozCncQh+05fv6MbeKvlcVS+XPxwtOa
            2/0XR5jOUGDWthXb9VWHk2LOsaVEa0DI0pcIS//Es8vS6eFrPdOU8g==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-10T21:44:45Z"
    mac: ENC[AES256_GCM,data:Sb27ZQwRLOtW0vEFrJGfYEqW5irpAGuq1sgl8LOeJdBbD1LOg0J+oLfRekexKHHHvHnP/EmrBPJcVA9GHdT1dNI4wEQNc4ZHUTkiH3lfN5+G4H7Ase0nmCjxEZ/4VlKI1T/utiM/9n+YirHUsfuLy7BzLrVqN8EMyGRvXbuiQfI=,iv:hcjgPqZoFNtBDuuxMXCpetHGvFTkSZoWtTtTQ8o8TN0=,tag:uiyiAKODrzZPoQ07VlW29Q==,type:str]
    pgp: []
    encrypted_regex: ^(data|env)$
    version: 3.8.1
