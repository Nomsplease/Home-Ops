apiVersion: apps/v1
kind: Deployment
metadata:
    name: samba
    namespace: paperless-ngx
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: samba
    template:
        metadata:
            labels:
                app: samba
        spec:
            containers:
                - name: samba
                  image: ghcr.io/nomsplease/samba:4.19.5
                  imagePullPolicy: Always
                  resources:
                    requests:
                        cpu: 512m
                        memory: 512Mi
                    limits:
                        cpu: 1024m
                        memory: 1Gi
                  env:
                    - name: ENC[AES256_GCM,data:VIM5L8dJe+F3SUqw,iv:LScIMQBQrhk1Fp5wO8wPKe3F3f87RvooqyzHajEZ5K8=,tag:VRX72aoos7WRx5E3X8vtrQ==,type:str]
                      value: ENC[AES256_GCM,data:MV4ONp4i,iv:A8IAveP51/YMoXHO5wwhJDV7xwiHgkFgJT6HzEbosuk=,tag:RSmckKQc30MnWD76MzRYdw==,type:str]
                    - name: ENC[AES256_GCM,data:MrUdLRfe,iv:gKb95DIG9mKcUa9HqEj/t8ZhJ9IfVtLXPawvwYvKPug=,tag:ckrDU+k2zZP7XuSBuZEwoQ==,type:str]
                      value: ENC[AES256_GCM,data:cdpqD7o5i+zwRGmtXSUyFnfggltM,iv:j9X1JH12TuQ8QfPu8iS1D379b3LhgiSkKYfsJV+XhGo=,tag:uKv3JZ4eQUhTauOVmx7DtQ==,type:str]
                    - name: ENC[AES256_GCM,data:CQokzg==,iv:CeAcwZmnHUGvsbimo1dO8nW3qSUjAYtTS4XdkcBkQ9Y=,tag:Gvrlim4O0jWXzvvL1oEURw==,type:str]
                      value: ENC[AES256_GCM,data:R4tx3p6wCQ==,iv:Afh4KaJTxQ/YYUOX7uQwPKd9+ob+Ux1jMWeD/gQoCWA=,tag:rAhDYUSUNKY5ZPwFdVguRQ==,type:str]
                    - name: ENC[AES256_GCM,data:jVzbYQ==,iv:zdbmUPq0Y/sqtp9vfoWsbY+gxs/fjO8QtSEfcWHjlss=,tag:bRTTwPVpyfXfIixztPE/og==,type:str]
                      value: ENC[AES256_GCM,data:lroI1a9JMmoqoAG2RYg=,iv:tK60TClkvnQ2pkzc510HE2//M+98xXCfQhjnOme1ZFk=,tag:YDythsaQKls6uSWPengV6g==,type:str]
                  volumeMounts:
                    - name: config
                      mountPath: /etc/samba/
                      readOnly: true
                    - name: pvc
                      mountPath: /export
                      subPath: export
                    - name: pvc
                      mountPath: /consume
                      subPath: consume
            volumes:
                - name: pvc
                  persistentVolumeClaim:
                    claimName: paperless-ngx-pvc
                - name: config
                  configMap:
                    name: samba
                    items:
                        - key: smb.conf
                          path: smb.custom
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSAwUVJsZUcrZmdvdzFEanhX
            WW1qVEQwaWxtUkJ3VC9PRkw1RVExZ0p3NlVzClNnNjFLZ2tuQkJBajE5UmYzN1V5
            OU0xZzRMQ0VhMXhhZDJIclEvb0JvczAKLS0tIEh0OHMrZjYxWVNISVJnVEZ6OHFP
            L1hRYzZnOUhaYmV2Y2c0aXBaYURuUTAK8u+v/jpBI8xBv00Jf6bHhjSSaGZa8xT6
            5XkV0inFrFvqEUFV6XNsS5l5wJ9MmrA0OYJcdhi81LStwCmzekxLwA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-10T21:47:16Z"
    mac: ENC[AES256_GCM,data:jMTRvAZ9xUPDVWVyz2VJSGOCC6+ytihyBTHOzgIWAty/FatGw0Uq0iHJan6NwXOxsN54YLPdztQAtbIYNbcbvxFvdnJBEBeI2wWpGcLCnsQffeBMiD4yJ6hvVGUEp6P3/H7dYtZv2+LzUJSDSgqJgb2IYBzC/4IOu8JpFaTXLBs=,iv:dUTvNTecmtT54F6wqG5Au4wnSSMG8VMM/c39812XdKo=,tag:x591uYh3PJFbIyeW60K/Hw==,type:str]
    pgp: []
    encrypted_regex: ^(data|env)$
    version: 3.8.1
