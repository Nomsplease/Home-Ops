apiVersion: apps/v1
kind: Deployment
metadata:
    name: samba
    namespace: paperless-ngx
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: samba
    template:
        metadata:
            labels:
                app: samba
        spec:
            containers:
                - name: samba
                  image: ghcr.io/dockur/samba:4.19.4
                  imagePullPolicy: Always
                  resources:
                    requests:
                        cpu: 512m
                        memory: 512Mi
                    limits:
                        cpu: 1024m
                        memory: 1Gi
                  env:
                    - name: ENC[AES256_GCM,data:g3WMiQ==,iv:JH8nFDEIJeJ1UC7KVvRUkMHQHNAxW6KReWUfXcofWuM=,tag:mwEQWZGmcsVMi8bPifE6qw==,type:str]
                      value: ENC[AES256_GCM,data:0UzPdvf/cA==,iv:du8KPPvF6khpKwQ5aBdxSD4TJ19Zk3tg6on0zx6hwNM=,tag:HoFjGQqYrF/pmcg0xfqQ5A==,type:str]
                    - name: ENC[AES256_GCM,data:QE1j2w==,iv:9xMmbLjHvg9ZdN8+2o1aMfJy+Rt4ppQnmgZM9+u6n2w=,tag:AgVok+e/w/PlvC3YPQ6v5Q==,type:str]
                      value: ENC[AES256_GCM,data:cvL/ykIVgxb9DBmuie8=,iv:rgUDqSMKx9jqvNzCLy4NDVaHcXRZaK1mKwVeeV6dDEA=,tag:ZDTYdS26cwmNF+JRSYKMRg==,type:str]
                  volumeMounts:
                    - name: config
                      mountPath: /etc/samba/
                      readOnly: true
                    - name: pvc
                      mountPath: /export
                      subPath: export
                    - name: pvc
                      mountPath: /consume
                      subPath: consume
            volumes:
                - name: pvc
                  persistentVolumeClaim:
                    claimName: paperless-ngx-pvc
                - name: config
                  configMap:
                    name: samba
                    items:
                        - key: smb.conf
                          path: smb.conf
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbkY3dERzejB5ZUowQk41
            WGlBRFB5N2tNZVhaN2ZmSEJxZ3dBVVFlcG5NCjZ3Y01Ra2pzVlY2VG83UEhLQlYz
            cGFXZy9jeXJSS2Rjci83SW53UDFPUTQKLS0tIDFvK0ZjaTZjUmNQblhuK0F0WlJv
            RzlmMmZVVlZQbDdaY0Z2aDBIWXZxNTAKSafXeHxBaQfDj0KoH1+LztX/WBQYWhkg
            x9zKCRcyhYlQHjjbx07Eux8OMGtJs2ctVa7jZGGWqSam/gfN75P44Q==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-10T14:46:21Z"
    mac: ENC[AES256_GCM,data:Q4zz4S7T8xkHNDB1p+7gfadoIMWd2l096h6c3fHkrPtXoK9i7rGPb3A06Ub4DWWKHsAfhPGb9IFPbqa5d9dCYB5cfWrA1VBKAsMoxdhNdK+CqadzY42ge8aBBoKmeWH8Yd1mXyLZNuVb2qaR5xPv5ZkQRx01sh5IiSzGVnZKUE8=,iv:p804wCCsIp9d+FXwYwCWCwTTjw2RjZHQZi41XY9IHrM=,tag:6/QZ2WvPVqy6ZnkEVUd8ew==,type:str]
    pgp: []
    encrypted_regex: ^(data|env)$
    version: 3.8.1
