apiVersion: apps/v1
kind: Deployment
metadata:
    name: samba
    namespace: paperless-ngx
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: samba
    template:
        metadata:
            labels:
                app: samba
        spec:
            containers:
                - name: samba
                  image: ghcr.io/nomsplease/samba:4.19.5
                  imagePullPolicy: Always
                  resources:
                    requests:
                        cpu: 512m
                        memory: 512Mi
                    limits:
                        cpu: 1024m
                        memory: 1Gi
                  env:
                    - name: ENC[AES256_GCM,data:kYOjhhq7F+a2vipm,iv:98XlCkM2oRxjpH6SToQXIfYv84DOR6I8VaO8HEI/1Wk=,tag:F6BT1BLqHIcjZJGo0hLPvg==,type:str]
                      value: ENC[AES256_GCM,data:NIuJlA==,iv:A7wQee0PzK6ybJBwR2i2qoqqn/SWKJS1UUncxId7dQk=,tag:GzsCVg2fFS1TA2ys2/pvkQ==,type:str]
                    - name: ENC[AES256_GCM,data:1mDvjPXS,iv:R/TWeHzFIfhsa9k5XsL/cj1JtMqHJp/ZSGsy/CLeFrM=,tag:jnQ81/yB7wslrZ8vxBYI3w==,type:str]
                      value: ENC[AES256_GCM,data:jq+7n/y5qD+lJl+CqfVHXAgukaF6,iv:gysu00b1R13rO8E9UoLFCxGyDddGmY73erTOpph6ark=,tag:ZFBf6yfGnkoT4sIDmLCUJA==,type:str]
                    - name: ENC[AES256_GCM,data:2p8LBQ==,iv:xe8gdLj3cS0wMR8yYH/frjl7IiXDCxIeC2f2sSHTZWI=,tag:TL23ImSV8WIBh6YHAHwviw==,type:str]
                      value: ENC[AES256_GCM,data:7ZYrgIwOkw==,iv:nAd7chG6ivbjTbKCU/qzcdCNl+OPku/DvlLJTrSx1H8=,tag:qoJwTv8KW99zJ0vQkhfGSg==,type:str]
                    - name: ENC[AES256_GCM,data:7iByDA==,iv:tvFv6iDFyBYKL2Vi3wEcNi1LIwupr+Djtfx4uur8esg=,tag:8nlut9etPIsjU9vigRrL1Q==,type:str]
                      value: ENC[AES256_GCM,data:t6PXDL5zIHF4H4KnZQg=,iv:fnQeFvHXEJT9/JVkwwek42plovBr/5tFx2tH07T8Xsc=,tag:Fn5Y37MK9JF7YQYNRF5ugw==,type:str]
                  volumeMounts:
                    - name: config
                      mountPath: /etc/samba/
                      readOnly: true
                    - name: pvc
                      mountPath: /export
                      subPath: export
                    - name: pvc
                      mountPath: /consume
                      subPath: consume
            volumes:
                - name: pvc
                  persistentVolumeClaim:
                    claimName: paperless-ngx-pvc
                - name: config
                  configMap:
                    name: samba
                    items:
                        - key: smb.conf
                          path: smb.custom
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBaMWcyemR6SDM0b0RodENa
            ZWFhQitGaEZ0TW55d3JQQVJnbGc1bEU4b2hvCnpWZ1k4NHJlbUNUT3JhR0t0amp5
            V0VRMUd2NHJHeHp1WWdyR0tHNkhPdjQKLS0tIEhOL1RNbDNOU21WNjZMQkU4TzVw
            QkFtKzA4OXRvcS8rLzNweFkydTJkUFUKgWBAXV++gfdYPFlIFpq5oIWvdUkq7no1
            4K8QOB+QLEORKBFAoH5h7p7ydiymN2nr/9hLy0gST8rJ+cJ7II+ueA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-10T21:30:13Z"
    mac: ENC[AES256_GCM,data:c6XvkRsxbWIH3K+kIcbCCuDChuZOTtARk1g9L0aFn6HV5wYMhhU1DcrNZ8u4tu68us0wmJ4dMq8iRGXY+PEwIDJNzf3jJUNQ+dbHaI8qT/nljWh34tqckHz0KAbmwWmVXIeMHCTnq7mAyLe/jd5oAWkTbaNIdj/tZszym6W9DQc=,iv:s/fNarfKBqLPOQwaMfZCiVMO3NqwYVlMUK7XOrlJtHM=,tag:Un1imxgskgitkexDAwqprg==,type:str]
    pgp: []
    encrypted_regex: ^(data|env)$
    version: 3.8.1
