apiVersion: apps/v1
kind: Deployment
metadata:
    name: samba
    namespace: paperless-ngx
spec:
    replicas: 1
    progressDeadlineSeconds: 600
    revisionHistoryLimit: 2
    strategy:
        type: Recreate
    selector:
        matchLabels:
            app: samba
    template:
        metadata:
            labels:
                app: samba
        spec:
            containers:
                - name: samba
                  image: ghcr.io/nomsplease/samba:4.19.5
                  imagePullPolicy: Always
                  resources:
                    requests:
                        cpu: 512m
                        memory: 512Mi
                    limits:
                        cpu: 1024m
                        memory: 1Gi
                  env:
                    - name: ENC[AES256_GCM,data:hQHTZ8VsRGyFrX31,iv:cn2bXIqNdcJKvh+jDD8G31HGO0gJE1enLFjsV+dPqdI=,tag:5Bg5tdlcYqZxjoy90N41/g==,type:str]
                      value: ENC[AES256_GCM,data:Yg==,iv:0UqWUa8Ucr4udGu7O3IVbBkctOJuHEkLJasm+P7im8A=,tag:e6+Op3HXFmXErf2di8k7kA==,type:str]
                    - name: ENC[AES256_GCM,data:RSbvWN9y,iv:J5lQV0ICJBCbJZ40fbKAmA5+OZWBbk+mB/F+cyLQhDI=,tag:D0tPhNwXnuJhPMvjRTvZHA==,type:str]
                      value: ENC[AES256_GCM,data:04eO0BkwysOeUTEAFZC0L9ygvX6y,iv:imX1vUZywj1K03CLBPila5/YBXLpacIAq3cdkBuSh6o=,tag:8m6j0Xuo9ljuV79AvjjPtQ==,type:str]
                    - name: ENC[AES256_GCM,data:MRTbhg==,iv:mYeF1Y4w3ma+TNnTjxL9lYV5tiw+ROpurQ0ms+Ogb+Q=,tag:yYDndvt8w3UKM+3ogtm2WQ==,type:str]
                      value: ENC[AES256_GCM,data:WQzvNi6YDQ==,iv:xaoX6NCXZgE4gtWR4FloLVoqfEE7w0kxfJZMJ3bMWtg=,tag:8gvEY1UrzvWkuJgqcAEvPw==,type:str]
                    - name: ENC[AES256_GCM,data:P0ZzKg==,iv:pGBkIIPJPAZQ7/52zdYSRz0qCq5iQN9kZirGVGqn5+M=,tag:7mQkRe4qq40VkZzuANXmyw==,type:str]
                      value: ENC[AES256_GCM,data:oOigpNVY9XeSSC/adOo=,iv:GF1pe8cD0NWAfKb5COxKNAiJ7WZSHC1bbNI011nTBlE=,tag:pRw2EYUkSYEX+krejxBi2A==,type:str]
                  volumeMounts:
                    - name: config
                      mountPath: /etc/samba/
                      readOnly: true
                    - name: pvc
                      mountPath: /export
                      subPath: export
                    - name: pvc
                      mountPath: /consume
                      subPath: consume
            volumes:
                - name: pvc
                  persistentVolumeClaim:
                    claimName: paperless-ngx-pvc
                - name: config
                  configMap:
                    name: samba
                    items:
                        - key: smb.conf
                          path: smb.custom
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1k8rczdg4c0u0a2z57zy334al5n0s3vk6mrqm6njnt3j8hr39sq4qxcrlcs
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA2N1plNzNQMjIvbml6c0Fh
            eWpPY3VGSmI3RlhubkMzNFZGbzkwMnRnUFRvCnpURnRaR3cvNDU1L0lTcVpKSGF2
            ZmIyMGJ6Vjd3by95MHhBNytvNW5BdFEKLS0tIG15VTdzYk85NkRNSTFsNGtYa25n
            V2c2bHJ3Ykc5U21Ka2krcHh5OS9Mc3MK8h1a2ODVp6wsPNphy72XTVGl82DB+3vj
            nhP8PcNn/I3Klb1JJnFbbpPpLbo7gEPHKjz7ibIJy1/mfekaVtTuzQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-10T21:42:39Z"
    mac: ENC[AES256_GCM,data:7QpleIx5HEZvB9Sl+MkYEXvFjIL0B05yfUEKPA/1p+2RP8BWzPVdSAT7PMZoJRNb3ktOER6EkakKE7JEWsPeOUtxAOxeuGGXPNLuiMw/+q1yGdlItXAgTA2JrkRC73v22/meERE1IOnRc/PMXPc2Qrn/pH0NyrWpl3Ej7/N6A5w=,iv:Sbsmr768OC4e0YYy05LdpDQioM9i7PmOwOi6/Y1/h0E=,tag:bDUz5z8TJFTPyeTTTHou0Q==,type:str]
    pgp: []
    encrypted_regex: ^(data|env)$
    version: 3.8.1
